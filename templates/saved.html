{% extends "base.html" %}

{% block body %}

{%include "nav-login.html" %}

<div class="pure-g">
    <div class="pure-u-1-12"></div>
  	 <div class="pure-u-5-6">
         <h1>{{title}}</h1>
         <div>
             <br><br><br>
             <form class="form-horizontal">
                 <div class= "form-group">
                     <a class= "btn btn-success" href="http://localhost:5000/remove/{{url}}/{{title}}/{{date}}">Remove Article</a>
                 <div class="form-group">
                     <label for="count" class="col-sm-6 control-label">Number of Significant Paragraphs</label>
                     <div class="col-xs-4">
                         <select id="count" class="form-control" onchange= "update()">
                             {% set i= 0 %}
                             {% for i in range(11) %}
                             <option>{{i}}</option>
                             {%set i = i +1 %}
                             {%endfor%}
                         </select>
                     </div>
                 </div>
             </form>
             
             
         </div>
         
         <div id = "summary">
         </div>
         <div hidden id = "hidden">
             {%for para in paragraphs %}
             <p  class="para {{para[2]}}"> {{para[1]}} </p>
             {%endfor%}
         </div>
         
     </div>
     <div class="pure-u-1-12"></div>
</div>

{%endblock%}
{%block script %}
<script type="text/javascript">
    function update(){
        var e = $('#count')[0];
        $('#summary').empty()
        var c = parseInt(e.options[e.selectedIndex].value);
        console.log(c);
        console.log({{i}});
        var paras = $(".para");
        var forDisplay = {};
        for (var x = 0; x < c && x < paras.length; x++){
            var p1=$(paras[x]).clone();
            //p1.show();
            console.log(p1)
            $(p1).removeClass("para");
            //$(p1).appendTo('#summary');
            forDisplay[$(p1).attr("class")] = p1;
            console.log(x)
        }
        console.log(forDisplay);
        forDKeys=Object.keys(forDisplay);
        
        function sortNumber(a,b){
            return a - b;
        }
        for(var z = 0; z<forDKeys.length;z++){
            forDKeys[z] = parseInt(forDKeys[z]);
            
        }
        forDKeys = forDKeys.sort(sortNumber);
        console.log(forDKeys);
        for(var y = 0; y<forDKeys.length;y++){
            $(forDisplay[forDKeys[y]]).appendTo('#summary');	   
            
        }
    }
</script>

{%endblock %}
